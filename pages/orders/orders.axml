<view class="orders-container">
  <!-- è®¢å•çŠ¶æ€åˆ‡æ¢ -->
  <view class="order-tabs">
    <view 
      class="tab-item {{activeTab === 'all' ? 'active' : ''}}" 
      onTap="switchTab" 
      data-tab="all"
    >
      å…¨éƒ¨
    </view>
    <view 
      class="tab-item {{activeTab === 'ongoing' ? 'active' : ''}}" 
      onTap="switchTab" 
      data-tab="ongoing"
    >
      è¿›è¡Œä¸­
    </view>
    <view 
      class="tab-item {{activeTab === 'completed' ? 'active' : ''}}" 
      onTap="switchTab" 
      data-tab="completed"
    >
      å·²å®Œæˆ
    </view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading-state" a:if="{{loading && orders.length === 0}}">
    <view class="loading-spinner"></view>
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>

  <!-- è®¢å•åˆ—è¡¨ -->
  <view class="order-list" a:if="{{!loading || orders.length > 0}}">
    <block a:for="{{filteredOrders}}" a:key="id">
      <view class="order-item">
        <view class="order-header">
          <text class="order-number">è®¢å•å·ï¼š{{item.orderNo}}</text>
          <text class="order-status {{item.status}}">{{item.statusText}}</text>
        </view>
        
        <view class="order-content">
          <image class="vehicle-image" src="{{item.vehicleImage}}" mode="aspectFill" />
          <view class="order-info">
            <text class="vehicle-name">{{item.vehicleName}}</text>
            <text class="order-time">ä¸‹å•æ—¶é—´ï¼š{{item.createTime}}</text>
            <text class="rental-period">ç§ŸèµæœŸé™ï¼š{{item.rentalPeriod}}</text>
            <text class="installment-status">{{item.installmentStatus}}</text>
          </view>
          <view class="order-price">
            <text class="price">Â¥{{item.installmentAmount}}</text>
            <text class="price-unit">/æœŸ</text>
          </view>
        </view>
        
        <view class="order-actions">
          <button 
            class="action-btn secondary" 
            onTap="viewOrderDetail" 
            data-order="{{item}}"
            a:if="{{item.status === 'pending'}}"
          >
            æŸ¥çœ‹è¯¦æƒ…
          </button>
          <button 
            class="action-btn primary" 
            onTap="payOrder" 
            data-order="{{item}}"
            a:if="{{item.status === 'pending'}}"
          >
            ç«‹å³æ”¯ä»˜
          </button>
          <button 
            class="action-btn secondary" 
            onTap="viewOrderDetail" 
            data-order="{{item}}"
            a:if="{{item.status === 'ongoing'}}"
          >
            æŸ¥çœ‹è¯¦æƒ…
          </button>
          
          <button 
            class="action-btn secondary" 
            onTap="viewOrderDetail" 
            data-order="{{item}}"
            a:if="{{item.status === 'completed'}}"
          >
            æŸ¥çœ‹è¯¦æƒ…
          </button>
        </view>
      </view>
    </block>
  </view>

  <!-- åŠ è½½æ›´å¤šæç¤º -->
  <view class="load-more" a:if="{{!loading && orders.length > 0 && hasMore}}">
    <text class="load-more-text">ä¸‹æ‹‰åŠ è½½æ›´å¤š</text>
  </view>

  <!-- æ²¡æœ‰æ›´å¤šæ•°æ®æç¤º -->
  <view class="no-more" a:if="{{!loading && orders.length > 0 && !hasMore}}">
    <text class="no-more-text">æ²¡æœ‰æ›´å¤šè®¢å•äº†</text>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" a:if="{{!loading && filteredOrders.length === 0}}">
    <text class="empty-icon">ğŸ“‹</text>
    <text class="empty-text">æš‚æ— {{activeTab === 'all' ? '' : activeTab === 'ongoing' ? 'è¿›è¡Œä¸­çš„' : 'å·²å®Œæˆçš„'}}è®¢å•</text>
    <button class="go-rent-btn" onTap="goToRent">å»ç§Ÿè½¦</button>
  </view>
</view>
