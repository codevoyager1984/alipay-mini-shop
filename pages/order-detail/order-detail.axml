<view class="order-detail-container">
  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading-state" a:if="{{loading}}">
    <view class="loading-spinner"></view>
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>

  <!-- è®¢å•åŸºæœ¬ä¿¡æ¯ -->
  <view class="order-info-card" a:if="{{!loading && orderDetail}}">
    <view class="order-header">
      <text class="order-number">è®¢å•å·ï¼š{{orderDetail.orderNo}}</text>
      <text class="order-status {{orderDetail.status}}">{{orderDetail.statusText}}</text>
    </view>
    
    <view class="product-info">
      <image class="product-image" src="{{orderDetail.productImage}}" mode="aspectFill" />
      <view class="product-details">
        <text class="product-name">{{orderDetail.productName}}</text>
        <text class="order-time">ä¸‹å•æ—¶é—´ï¼š{{orderDetail.createTime}}</text>
        <text class="rental-period">ç§ŸèµæœŸé™ï¼š{{orderDetail.rentalPeriod}}</text>
        <text class="total-amount">è®¢å•æ€»é¢ï¼šÂ¥{{orderDetail.totalAmount}}</text>
      </view>
    </view>
  </view>

  <!-- åˆåŒå¾…ç­¾è®¢æç¤º -->
  <view class="contract-pending-card" a:if="{{!loading && orderDetail && orderDetail.status === 'contract_pending'}}">
    <view class="card-title">
      <text class="title-text">åˆåŒç­¾è®¢</text>
    </view>
    
    <view class="contract-notice">
      <view class="notice-icon">ğŸ“</view>
      <view class="notice-content">
        <text class="notice-title">éœ€è¦ç­¾è®¢åˆåŒ</text>
        <text class="notice-desc">è¯·å…ˆå®ŒæˆåˆåŒç­¾è®¢ï¼Œç­¾è®¢å®Œæˆåå³å¯æŸ¥çœ‹åˆ†æœŸä»˜æ¬¾è¯¦æƒ…</text>
      </view>
    </view>
  </view>

  <!-- åˆ†æœŸä»˜æ¬¾è¯¦æƒ… -->
  <view class="installments-card" a:if="{{!loading && installments.length > 0 && orderDetail && orderDetail.status !== 'contract_pending'}}">
    <view class="card-title">
      <text class="title-text">åˆ†æœŸä»˜æ¬¾è¯¦æƒ…</text>
      <text class="title-desc">å…±{{installments.length}}æœŸ</text>
    </view>
    
    <view class="installments-list">
      <block a:for="{{installments}}" a:key="installmentNo">
        <view class="installment-item">
          <view class="installment-header">
            <text class="installment-title">ç¬¬{{item.installmentNo}}æœŸ</text>
            <text class="installment-status {{item.status}}">{{item.statusText}}</text>
          </view>
          
          <view class="installment-details">
            <view class="detail-row">
              <text class="label">åº”ä»˜é‡‘é¢ï¼š</text>
              <text class="value amount">Â¥{{item.amount}}</text>
            </view>
            <view class="detail-row">
              <text class="label">åˆ°æœŸæ—¶é—´ï¼š</text>
              <text class="value">{{item.dueDate}}</text>
            </view>
            <view class="detail-row" a:if="{{item.paidDate}}">
              <text class="label">æ”¯ä»˜æ—¶é—´ï¼š</text>
              <text class="value">{{item.paidDate}}</text>
            </view>
            <view class="detail-row" a:if="{{item.paymentMethod}}">
              <text class="label">æ”¯ä»˜æ–¹å¼ï¼š</text>
              <text class="value">{{item.paymentMethod}}</text>
            </view>
          </view>
        </view>
      </block>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" a:if="{{!loading && !orderDetail}}">
    <text class="empty-icon">ğŸ“‹</text>
    <text class="empty-text">è®¢å•ä¿¡æ¯åŠ è½½å¤±è´¥</text>
    <button class="retry-btn" onTap="loadOrderDetail">é‡æ–°åŠ è½½</button>
  </view>

</view>
